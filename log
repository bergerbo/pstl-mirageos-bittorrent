ocamlbuild -classic-display -use-ocamlfind -pkgs lwt.syntax,mirage-block-unix,mirage-console.unix,mirage-types.lwt -tags "syntax(camlp4o),annot,bin_annot,strict_sequence,principal" -tag-line "<static*.*>: -syntax(camlp4o)" -cflag -g -lflags -g,-linkpkg main.native
ocamlfind ocamldep -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o -modules torrent_parser.ml > torrent_parser.ml.depends
ocamlfind ocamlc -c -g -annot -bin-annot -principal -strict-sequence -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o -o torrent_parser.cmo torrent_parser.ml
ocamlfind ocamlc -c -g -annot -bin-annot -principal -strict-sequence -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o -o main.cmo main.ml
ocamlfind ocamlopt -c -g -annot -bin-annot -principal -strict-sequence -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o -o torrent_parser.cmx torrent_parser.ml
ocamlfind ocamlopt -c -g -annot -bin-annot -principal -strict-sequence -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o -o main.cmx main.ml
ocamlfind ocamlopt -g -linkpkg -linkpkg -package uri -package cohttp.lwt -package lwt.syntax -package bencode -package mirage-types.lwt -package mirage-console.unix -package mirage-block-unix -syntax camlp4o torrent.cmx torrent_parser.cmx main.cmx -o main.native
ln -nfs _build/main.native mir-main
